#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Padr√£o de commit: tipo(escopo): descri√ß√£o
# Tipos v√°lidos: feat, fix, docs, style, refactor, test, chore
# Exemplo: feat(auth): adicionar valida√ß√£o de email

commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "‚ùå ERRO: Mensagem de commit inv√°lida!"
    echo ""
    echo "üìã Formato esperado: tipo(escopo): descri√ß√£o"
    echo ""
    echo "üìå Tipos v√°lidos:"
    echo "  ‚Ä¢ feat:     nova funcionalidade"
    echo "  ‚Ä¢ fix:      corre√ß√£o de bug"
    echo "  ‚Ä¢ docs:     documenta√ß√£o"
    echo "  ‚Ä¢ style:    formata√ß√£o, espa√ßos"
    echo "  ‚Ä¢ refactor: refatora√ß√£o de c√≥digo"
    echo "  ‚Ä¢ test:     adi√ß√£o/corre√ß√£o de testes"
    echo "  ‚Ä¢ chore:    tarefas de build, configura√ß√£o"
    echo ""
    echo "‚úÖ Exemplos v√°lidos:"
    echo "  ‚Ä¢ feat(auth): adicionar valida√ß√£o de email"
    echo "  ‚Ä¢ fix(utils): corrigir valida√ß√£o de CPF"
    echo "  ‚Ä¢ refactor: simplificar fun√ß√£o de senha"
    echo "  ‚Ä¢ test: adicionar testes para EmailUtils"
    echo ""
    echo "‚ùå Sua mensagem: $(cat $1)"
    exit 1
fi

echo "‚úÖ Mensagem de commit v√°lida!"
